/*! MEditor v2.0.0 | Copyright (c) 2016-present Manu (http://manu.ws) */
!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("jQuery"));else if("function"==typeof define&&define.amd)define(["jQuery"],n);else{var e="object"==typeof exports?n(require("jQuery")):n(t.jQuery);for(var a in e)("object"==typeof exports?exports:t)[a]=e[a]}}("undefined"!=typeof self?self:this,function(t){return function(t){var n={};function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(a,o,function(n){return t[n]}.bind(null,o));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}([function(n,e){n.exports=t},,function(t,n,e){},,function(t,n,e){"use strict";e.r(n);e(2);var a=e(0),o=e.n(a),c={UI:"meditor-ui",UI_DRAGGING:"meditor-ui-dragging",UI_HIDDEN:"meditor-ui-hidden",SORTABLE:"ui-sortable",WRAPPER:"meditor-wrapper",BTN:"meditor-btn",BTN_GROUP:"meditor-btn-group",BTN_PRIMARY:"meditor-btn-primary",BTN_DEFAULT:"meditor-btn-default",STATE_ACTIVE:"active",STATE_OPENED:"opened",STATE_SHOWED:"showed",STATE_SELECTED:"selected",STATE_DUPLICATED:"duplicated",STATE_INITIALIZED:"initialized",STATE_INITIALIZING:"initializing",STATE_PREVIEWING:"previewing",STATE_TOOLBAR_SHOWED:"showed-meditor-toolbar",STATE_MODAL_OPENED:"opened-modal",STATE_NOT_MATCHED:"not-matched",STATE_HAS_COMPONENT:"has-component",STATE_HAS_FOOTER:"has-footer",ADD_CONTENT:"btn-add-content",SIDEBAR:"meditor-sidebar",SIDEBAR_HEADER:"meditor-sidebar-header",SIDEBAR_BODY:"meditor-sidebar-body",SIDEBAR_TITLE:"meditor-sidebar-title",SIDEBAR_CLOSER:"meditor-sidebar-closer",TOPBAR:"meditor-topbar",TOPBAR_LEFT:"meditor-topbar-left",TOPBAR_CENTER:"meditor-topbar-center",TOPBAR_RIGHT:"meditor-topbar-right",TOPBAR_BUTTON:"meditor-topbar-btn",TOPBAR_TITLE:"meditor-topbar-title",MODAL:"meditor-modal",MODAL_COMPONENT:"meditor-modal-component",MODAL_CONTAINER:"meditor-modal-container",MODAL_HEADER:"meditor-modal-header",MODAL_TITLE:"meditor-modal-title",MODAL_BODY:"meditor-modal-body",MODAL_FOOTER:"meditor-modal-footer",MODAL_CLOSE:"meditor-modal-close",MODAL_ADD:"meditor-modal-add",SNIPPET:"meditor-snippet",SNIPPET_INNER:"meditor-snippet-inner",SNIPPET_TITLE:"meditor-snippet-title",SNIPPET_ADD:"meditor-snippet-add",SNIPPET_PREVIEW:"meditor-snippet-preview",SNIPPET_CONTAINER:"meditor-snippet-container",SNIPPET_COMPONENT:"meditor-snippet-component",SNIPPETS:"meditor-snippets",SNIPPETS_FILTER:"meditor-snippets-filter",SNIPPETS_FILTER_COMPONENT:"meditor-snippets-filter-component",SNIPPETS_FILTER_CONTAINER:"meditor-snippets-filter-container",SNIPPETS_FILTER_LABEL:"meditor-snippets-filter-label",SNIPPETS_SEARCH:"meditor-snippets-search",SNIPPETS_FILTER_WRAPPER:"meditor-snippets-filter-wrapper",SNIPPETS_COMPONENT:"meditor-snippets-component",SNIPPETS_WRAPPER:"meditor-snippets-wrapper",TOOLBAR:"meditor-toolbar",TOOLBAR_BOTTOM:"meditor-toolbar-bottom",TOOLBAR_CONTENT_AREA:"meditor-toolbar-content-area",TOOLBAR_CONTAINER:"meditor-toolbar-container",TOOLBAR_CONTAINER_CONTENT:"meditor-toolbar-container-content",TOOLBAR_SUB_CONTAINER:"meditor-toolbar-sub-container",TOOLBAR_SUB_CONTAINER_BOTTOM:"meditor-toolbar-bottom-sub-container",TOOLBAR_COMPONENT:"meditor-toolbar-component",TOOLBAR_COMPONENT_BOTTOM:"meditor-toolbar-bottom-component",SETTING:"meditor-setting",SETTING_FORM:"meditor-setting-form",SETTING_FORM_LOADING:"meditor-setting-form-loading",CONTENT_AREA:"meditor-content-area",CONTENT_AREA_INNER:"meditor-content-area-inner",CONTENT_AREAS:"meditor-content-areas",CONTENT_AREAS_WRAPPER:"meditor-content-areas-wrapper",IFRAME:"meditor-iframe",IFRAME_BODY:"meditor-iframe-body",IFRAME_WRAPPER:"meditor-iframe-wrapper",IFRAME_WIDTH_SWITCHER:"meditor-iframe-width-switcher",IFRAME_COVER_WRAPPER:"meditor-iframe-cover-wrapper",IFRAME_COVER_WRAPPER_FAKE:"meditor-iframe-cover-wrapper-fake",IFRAME_COVER:"meditor-iframe-cover",IFRAME_COVER_HIDDEN:"hidden-cover",COMPONENT:"meditor-component",COMPONENT_MOVE:"btn-component-move",COMPONENT_MOVE_UP:"btn-component-move-up",COMPONENT_MOVE_DOWN:"btn-component-move-down",COMPONENT_SETTING:"btn-component-setting",COMPONENT_DUPLICATE:"btn-component-duplicate",COMPONENT_COPY:"btn-component-copy",COMPONENT_CUT:"btn-component-cut",COMPONENT_DELETE:"btn-component-delete",COMPONENT_CONTENT:"meditor-component-content",COMPONENT_EXISTING:"existing-component",CONTAINER:"meditor-container",CONTAINER_MOVE:"btn-container-move",CONTAINER_MOVE_UP:"btn-container-move-up",CONTAINER_MOVE_DOWN:"btn-container-move-down",CONTAINER_DUPLICATE:"btn-container-duplicate",CONTAINER_COPY:"btn-container-copy",CONTAINER_CUT:"btn-container-cut",CONTAINER_DELETE:"btn-container-delete",CONTAINER_SETTING:"btn-container-setting",CONTAINER_INNER:"meditor-container-inner",CONTAINER_CONTENT:"meditor-container-content",CONTAINER_CONTENT_INNER:"meditor-container-content-inner",SUB_CONTAINER:"meditor-sub-container",SUB_CONTAINER_CONTENT:"meditor-sub-container-content",PREVIEW_AREA:"meditor-preview-area"},i={title:"M's Email Editor",nestedContainerEnabled:!0,containerForQuickAddComponent:'\n        <div class="row">\n            <div class="col-sm-12" data-type="container-content">\n            </div>\n        </div>\n    ',extraSettings:null,locale:{viewOnMobile:"View on mobile",viewOnTablet:"View on tablet",viewOnLaptop:"View on laptop",viewOnDesktop:"View on desktop",previewOn:"Preview ON",previewOff:"Preview OFF",fullscreenOn:"Fullscreen ON",fullscreenOff:"Fullscreen Off",save:"Save",addContent:"Add content",addContentBelow:"Add Content Below",containerSetting:"Container Settings",confirmDeleteContainerText:"Are you sure that you want to delete this container? This action can not be undone!",confirmDeleteComponentText:"Are you sure that you want to delete this component? This action can not be undone!"},widthMobile:480,widthTablet:820,widthLaptop:1050,minWidthDesktop:1200,defaultComponentType:"blank",snippetsUrl:"snippets/snippets.html",snippetsCategoriesSeparator:";",contentStyles:[],contentAreasSelector:null,contentAreasWrapper:'<div class="'.concat(c.UI," ").concat(c.CONTENT_AREAS_WRAPPER,'"></div>'),containerSettingEnabled:!1,containerSettingInitFunction:null,containerSettingShowFunction:null,containerSettingHideFunction:null,onReady:function(){},onSave:function(t){},onSnippetsLoaded:function(t){},onSnippetsError:function(t){},onInitIframe:function(t,n,e){},onContentChanged:function(t,n){},onBeforeInitContentArea:function(t){},onInitContentArea:function(t){},onBeforeInitContainer:function(t,n){},onInitContainer:function(t,n){},onBeforeContainerDeleted:function(t,n,e){},onContainerDeleted:function(t,n,e){},onContainerChanged:function(t,n,e){},onContainerDuplicated:function(t,n,e,a){},onContainerSelected:function(t,n,e){},onContainerSnippetAdded:function(t,n,e,a){},onComponentReady:function(t){},onBeforeInitComponent:function(t,n){},onInitComponent:function(t,n){},onBeforeComponentDeleted:function(t,n,e){},onComponentDeleted:function(t,n,e){},onComponentChanged:function(t,n,e){},onComponentDuplicated:function(t,n,e,a){},onComponentSelected:function(t,n,e){},onComponentSnippetAdded:function(t,n,e,a){},onBeforeDynamicContentLoad:function(t,n,e){},onDynamicContentLoaded:function(t,n,e){},onDynamicContentError:function(t,n,e){}},r=function(){var t=(new Date).getTime(),n=Math.round(9876543210*Math.random());return"meditor-ui-".concat(t).concat(n)},s=function(t,n,e){var a=e?[]:{};return n||(n=[]),$.each(t.get(0).attributes,function(t,o){0===o.name.indexOf("data-")&&-1===$.inArray(o.name,n)&&(e?a.push("".concat(o.name,'="').concat(o.value,'"')):a[o.name]=o.value)}),a},l={ADD_CONTENT:'<i class="fa fa-plus"></i>',PASTE_CONTENT:'<i class="fa fa-paste"></i>',MOVE_CONTAINER:'<i class="fa fa-arrows-v"></i>',MOVE_COMPONENT:'<i class="fa fa-arrows"></i>',MOVE_UP_CONTAINER:'<i class="fa fa-chevron-up"></i>',MOVE_UP_COMPONENT:'<i class="fa fa-chevron-up"></i>',MOVE_DOWN_CONTAINER:'<i class="fa fa-chevron-down"></i>',MOVE_DOWN_COMPONENT:'<i class="fa fa-chevron-down"></i>',SETTING_CONTAINER:'<i class="fa fa-cog"></i>',SETTING_COMPONENT:'<i class="fa fa-cog"></i>',DUPLICATE_CONTAINER:'<i class="fa fa-files-o"></i>',DUPLICATE_COMPONENT:'<i class="fa fa-files-o"></i>',COPY_CONTAINER:'<i class="fa fa-files-o"></i>',COPY_COMPONENT:'<i class="fa fa-files-o"></i>',CUT_CONTAINER:'<i class="fa fa-cut"></i>',CUT_COMPONENT:'<i class="fa fa-cut"></i>',DELETE_CONTAINER:'<i class="fa fa-trash-o"></i>',DELETE_COMPONENT:'<i class="fa fa-trash-o"></i>',DEVICE_MOBILE:'<i class="fa fa-fw fa-mobile"></i>',DEVICE_TABLET:'<i class="fa fa-fw fa-tablet"></i>',DEVICE_LAPTOP:'<i class="fa fa-fw fa-laptop"></i>',DEVICE_DESKTOP:'<i class="fa fa-fw fa-desktop"></i>',PREVIEW_ON:'<i class="fa fa-fw fa-eye"></i>',PREVIEW_OFF:'<i class="fa fa-fw fa-eye-slash"></i>',FULLSCREEN_ON:'<i class="fa fa-fw fa-compress"></i>',FULLSCREEN_OFF:'<i class="fa fa-fw fa-expand"></i>',SAVE:'<i class="fa fa-fw fa-save"></i>',ADD:'<i class="fa fa-plus"></i>'},T=function(t,n,e,a,o,i){var s=this.options,T=r(),E='\n        <section\n            class="'.concat(c.UI," ").concat(c.SNIPPET," ").concat("container"===t?c.SNIPPET_CONTAINER:c.SNIPPET_COMPONENT,'"\n            data-snippet="#').concat(T,'"\n            data-type="').concat(t,'"\n            data-meditor-title="').concat(n,'"\n            data-meditor-categories="').concat(a,'"\n        >\n            <span class="').concat(c.SNIPPET_INNER,'">\n                <span class="').concat(c.SNIPPET_PREVIEW,'" style="background-image: url(\'').concat(e,'\')"></span>\n                <span class="').concat(c.SNIPPET_TITLE,'" title="').concat(n,'">').concat(n,'</span>\n                <span class="').concat(c.SNIPPET_ADD," ").concat(c.BTN," ").concat(c.BTN_PRIMARY,'" title="').concat(n,'">').concat(l.ADD," Add</span>\n            </span>\n        </section>\n    "),d='<script id="'.concat(T,'" type="text/html" ').concat(i.join(" "),">").concat(o,"<\/script>");return a=a.split(s.snippetsCategoriesSeparator),"container"===t?this.categoryContainer=this.categoryContainer.concat(a):-1!==t.indexOf("component")&&(this.categoryComponent=this.categoryComponent.concat(a)),[E,d]},E=function(){var t=this,n=t.modal,e='<option value="" selected="selected">All</option>';$.each(t.categoryComponent,function(t,n){e+='<option value="'.concat(n,'" class="').concat(c.SNIPPETS_FILTER_COMPONENT,'">').concat(n,"</option>")}),$.each(t.categoryContainer,function(n,a){var o=-1!==$.inArray(a,t.categoryComponent);e+='<option value="'.concat(a,'" class="').concat(c.SNIPPETS_FILTER_CONTAINER," ").concat(o?c.STATE_DUPLICATED:"",'">').concat(a,"</option>")});var a=n.find(".".concat(c.SNIPPETS_FILTER_WRAPPER));return 0===a.length&&(a=$('<div class="'.concat(c.UI," ").concat(c.SNIPPETS_FILTER_WRAPPER,'"></div>')),n.find(".".concat(c.MODAL_TITLE)).replaceWith(a)),[e,a]},d=function(t){for(var n=[],e=0;e<t.length;e++){var a=t[e]||"";""!==a&&-1===$.inArray(a,n)&&n.push(a)}return n.sort()};function N(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],a=!0,o=!1,c=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done)&&(e.push(i.value),!n||e.length!==n);a=!0);}catch(t){o=!0,c=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw c}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O,f=function(t){var n=this.options,e=(t.attr("data-type")||"").replace("component-","");return e&&e in MEditor.components?e:("string"==typeof n.defaultComponentType?e=n.defaultComponentType:"function"==typeof n.defaultComponentType&&(e=n.defaultComponentType.call(this,t)),e||this.error("Component type is undefined!"),e)},p={COMPONENT:"component",CONTAINER:"container",EXTRA:"extra"},C=function(){var t=this.options,n=this.sidebar,e=this.sidebarBody.children(".".concat(c.STATE_ACTIVE));if(e.length>0){switch(e.attr("[data-setting-category]")){case p.CONTAINER:"function"==typeof t.containerSettingHideFunction&&t.containerSettingHideFunction.call(this,e,this);break;case p.COMPONENT:var a=e.attr("data-type"),o=MEditor.components[a];"function"==typeof o.hideSettingForm&&o.hideSettingForm.call(o,e,this)}e.removeClass(c.STATE_ACTIVE)}this.settingComponent=null,this.settingContainer=null,n.removeClass(c.STATE_OPENED)},A=function(t,n,e,a,o,i,r){var s=this,l=s.sidebar,T=s.sidebarTitle,E=s.sidebarBody,d=E.children(".".concat(c.SETTING_FORM,'[data-setting-type="').concat(n,'"][data-setting-category="').concat(e,'"]'));if(0===d.length){if(void 0===o)return void(void 0!==O&&C.call(O));if("function"==typeof o){O=s,d=$('\n                <div\n                    data-setting-type="'.concat(n,'"\n                    data-setting-category="').concat(e,'"\n                    class="').concat(c.UI," ").concat(c.SETTING_FORM,'"\n                ></div>\n            '));var N=$('<span class="'.concat(c.SETTING_FORM_LOADING,'" />')).html("Loading...");E.append(d),d.append(N),$.when(o.call(r,d,s)).done(function(){setTimeout(function(){N.remove(),"function"==typeof i&&i.call(r,d,t,s)},100)})}}else"function"==typeof i&&(i.call(r,d,t,s),O=s);switch(s.settingComponent=null,s.settingContainer=null,e){case p.COMPONENT:s.settingComponent=t;break;case p.CONTAINER:s.settingContainer=t}E.children(".".concat(c.STATE_ACTIVE)).removeClass(c.STATE_ACTIVE),T.html(a),d.addClass(c.STATE_ACTIVE),l.addClass(c.STATE_OPENED)},u=function(t){var n=this,e=n.options,a=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return A.call.apply(A,[n].concat(e))};if(t.is(".".concat(c.COMPONENT))){var o=f.call(n,t),i=MEditor.components[o];a(t,o,p.COMPONENT,i.settingTitle,i.initSettingForm,i.showSettingForm,i)}else if(t.is(".".concat(c.CONTAINER)))a(t,null,p.CONTAINER,e.locale.containerSetting,e.containerSettingInitFunction,e.containerSettingShowFunction,n);else{var r=t.attr("data-extra-setting"),s=e.extraSettings[r];a(t,r,p.EXTRA,s.title,s.settingInitFunction,s.settingShowFunction,s)}};function _(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],a=!0,o=!1,c=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done)&&(e.push(i.value),!n||e.length!==n);a=!0);}catch(t){o=!0,c=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw c}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],a=!0,o=!1,c=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done)&&(e.push(i.value),!n||e.length!==n);a=!0);}catch(t){o=!0,c=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw c}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var I=function(t){var n="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";t.off(n).on(n,function(){t.hasClass(c.STATE_SHOWED)||(t.css("display","none"),$(document.body).removeClass(c.STATE_MODAL_OPENED))}),t.removeClass(c.STATE_SHOWED)},v=function(){var t=this.modal;this.modalTarget=null,this.modalTargetAction=null,t.find(".".concat(c.STATE_SELECTED)).removeClass(c.STATE_SELECTED),t.find(".".concat(c.STATE_NOT_MATCHED)).removeClass(c.STATE_NOT_MATCHED),t.find(".".concat(c.SNIPPETS_FILTER)).val(""),t.removeClass(c.MODAL_COMPONENT),t.removeClass(c.MODAL_CONTAINER),I.call(this,t)},m={APPEND:"append",AFTER:"after"},R={CONTENT_AREA:1,CONTAINER:2,SUB_CONTAINER:3,SUB_CONTAINER_BOTTOM:4,CONTAINER_CONTENT:5,SUB_CONTAINER_CONTENT:6,COMPONENT:7,COMPONENT_BOTTOM:8},S=function(t,n){var e=this.options,a="";switch(t){case R.CONTAINER:case R.SUB_CONTAINER:return n&&(a='<a href="javascript:void(0);" class="'.concat(c.UI," ").concat(c.CONTAINER_SETTING,'">').concat(l.SETTING_CONTAINER,"</a>")),'\n                <div class="'.concat(c.UI," ").concat(c.TOOLBAR," ").concat(c.TOOLBAR_CONTAINER," ").concat(t===R.SUB_CONTAINER?c.TOOLBAR_SUB_CONTAINER:"",'">\n                    \x3c!--a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.CONTAINER_MOVE,'">').concat(l.MOVE_CONTAINER,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.CONTAINER_MOVE_UP,'">').concat(l.MOVE_UP_CONTAINER,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.CONTAINER_MOVE_DOWN,'">').concat(l.MOVE_DOWN_CONTAINER,"</a--\x3e\n                    ").concat(a,'\n                    \x3c!--a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.CONTAINER_CUT,'">').concat(l.CUT_CONTAINER,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.CONTAINER_COPY,'">').concat(l.COPY_CONTAINER,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.CONTAINER_DELETE,'">').concat(l.DELETE_CONTAINER,"</a--\x3e\n                </div>\n            ");case R.COMPONENT:return n&&(a='<a href="javascript:void(0);" class="'.concat(c.UI," ").concat(c.COMPONENT_SETTING,'">').concat(l.SETTING_COMPONENT,"</a>")),'\n                <div class="'.concat(c.UI," ").concat(c.TOOLBAR," ").concat(c.TOOLBAR_COMPONENT,'">\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_MOVE,'">').concat(l.MOVE_COMPONENT,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_MOVE_UP,'">').concat(l.MOVE_UP_COMPONENT,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_MOVE_DOWN,'">').concat(l.MOVE_DOWN_COMPONENT,"</a>\n                    ").concat(a,'\n                    \x3c!--a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_CUT,'">').concat(l.CUT_COMPONENT,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_COPY,'">').concat(l.COPY_COMPONENT,'</a--\x3e\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_DUPLICATE,'">').concat(l.DUPLICATE_COMPONENT,'</a>\n                    <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.COMPONENT_DELETE,'">').concat(l.DELETE_COMPONENT,"</a>\n                </div>\n            ");case R.CONTENT_AREA:return'\n                \x3c!--div class="'.concat(c.UI," ").concat(c.TOOLBAR_CONTENT_AREA,'">\n                    <a href="javascript:void(0)" class="').concat(c.UI," ").concat(c.BTN," ").concat(c.BTN_DEFAULT," ").concat(c.ADD_CONTENT,'" title="').concat(e.locale.addContent,'">').concat(l.ADD_CONTENT,"</a>\n                </div--\x3e\n            ");case R.CONTAINER_CONTENT:case R.SUB_CONTAINER_CONTENT:return'\n                <div class="'.concat(c.UI," ").concat(c.TOOLBAR_CONTAINER_CONTENT,'">\n                    <a href="javascript:void(0)" class="').concat(c.UI," ").concat(c.BTN," ").concat(c.BTN_DEFAULT," ").concat(c.ADD_CONTENT,'" title="').concat(e.locale.addContent,'">').concat(l.ADD_CONTENT,"</a>\n                </div>\n            ");case R.SUB_CONTAINER_BOTTOM:return'\n                <div class="'.concat(c.UI," ").concat(c.TOOLBAR," ").concat(c.TOOLBAR_BOTTOM," ").concat(c.TOOLBAR_SUB_CONTAINER_BOTTOM,'">\n                    <a href="javascript:void(0)" class="').concat(c.UI," ").concat(c.ADD_CONTENT,'" title="').concat(e.locale.addContentBelow,'">').concat(l.ADD_CONTENT,"</a>\n                </div>\n            ");case R.COMPONENT_BOTTOM:return'\n                <div class="'.concat(c.UI," ").concat(c.TOOLBAR," ").concat(c.TOOLBAR_BOTTOM," ").concat(c.TOOLBAR_COMPONENT_BOTTOM,'">\n                    <a href="javascript:void(0)" class="').concat(c.UI," ").concat(c.ADD_CONTENT,'" title="').concat(e.locale.addContentBelow,'">').concat(l.ADD_CONTENT," ").concat(e.locale.addContentBelow,"</a>\n                </div>\n            ")}},P=function(t){var n=this,e=n.options,a=t.closest("[data-type^=component]"),o=t.closest(".".concat(c.CONTENT_AREA));t.attr("id",r()),"function"==typeof e.onBeforeDynamicContentLoad&&e.onBeforeDynamicContentLoad.call(n,t,a,o);var i=t.attr("data-dynamic-href"),l=s(a,["data-type","data-dynamic-href"],!1);return l=$.param(l),$.ajax({url:i,data:l,type:"GET",dataType:"HTML",success:function(a,c,i){t.html(a),"function"==typeof e.onDynamicContentLoaded&&e.onDynamicContentLoaded.call(n,t,i,o)},error:function(a,c,i){"function"==typeof e.onDynamicContentError&&e.onDynamicContentError.call(n,t,a,o)}})},D=function(t,n,e){var a=this,o=a.options;if(!e.hasClass(c.STATE_INITIALIZED)||!e.hasClass(c.STATE_INITIALIZING)){e.addClass(c.STATE_INITIALIZING),e.attr("id",r()),"function"==typeof o.onBeforeInitComponent&&o.onBeforeInitComponent.call(a,e,t),e.children(".".concat(c.COMPONENT_CONTENT)).attr("id",r());var i=f.call(a,e),s=MEditor.components[i];e.append(S.call(a,R.COMPONENT,s.settingEnabled)),e.append(S.call(a,R.COMPONENT_BOTTOM)),e.find("[data-dynamic-href]").each(function(){var t=$(this);P.call(a,t)}),"function"==typeof s.init&&s.init.call(s,t,n,e,a),"function"==typeof o.onInitComponent&&o.onInitComponent.call(a,e,t),e.addClass(c.STATE_INITIALIZED),e.removeClass(c.STATE_INITIALIZING)}},y=function(t){t.css("display","block"),$(document.body).addClass(c.STATE_MODAL_OPENED),setTimeout(function(){t.addClass(c.STATE_SHOWED)},0)},M=function(t,n,e,a){var o=this.modal;this.modalTarget=t,this.modalTargetAction=n,e&&o.addClass(c.MODAL_COMPONENT),a&&o.addClass(c.MODAL_CONTAINER),o.css("display","block"),y.call(this,o)},g=function(t,n){var e;n.is("section")?(n.addClass("".concat(c.UI," ").concat(c.CONTAINER)),n.wrapInner('<section class="'.concat(c.UI," ").concat(c.CONTAINER_INNER,'"></section>')),e=n):(n.wrap('\n            <section class="'.concat(c.UI," ").concat(c.CONTAINER,'">\n                <section class="').concat(c.UI," ").concat(c.CONTAINER_INNER,'"></section>\n            </section>\n        ')),e=n.parent().parent()),b.call(this,t,e)},L=function(t,n,e,a){if(!e.is(".".concat(c.TOOLBAR_CONTAINER_CONTENT))){var o;e.is("section")?(e.addClass("".concat(c.UI," ").concat(c.COMPONENT)),0===e.find(".".concat(c.COMPONENT_CONTENT)).length&&e.wrapInner('<section class="'.concat(c.UI," ").concat(c.COMPONENT_CONTENT,'"></section>')),o=e):(e.wrap('\n            <section class="'.concat(c.UI," ").concat(c.COMPONENT,'">\n                <section class="').concat(c.UI," ").concat(c.COMPONENT_CONTENT,'"></section>\n            </section>\n        ')),o=e.parent().parent()),a&&o.addClass("".concat(c.COMPONENT_EXISTING)),D.call(this,t,n,o)}},B=function(t){if(0!==t.length){var n=t.children().length>0;t[n?"addClass":"removeClass"](c.STATE_HAS_COMPONENT)}},b=function(t,n){var e=this,a=e.options,o=a.nestedContainerEnabled&&n.closest('[data-type="container-content"]').length>0;n.hasClass(c.STATE_INITIALIZED)&&n.hasClass(c.STATE_INITIALIZING)||(n.addClass(c.STATE_INITIALIZING),"function"==typeof a.onBeforeInitContainer&&a.onBeforeInitContainer.call(e,n,t),o&&n.addClass(c.SUB_CONTAINER),n.append(S.call(e,o?R.SUB_CONTAINER:R.CONTAINER,a.containerSettingEnabled)),o&&n.append(S.call(e,R.SUB_CONTAINER_BOTTOM)),n.attr("id",r()),n.find('[data-type="container-content"]').each(function(){var i=$(this);a.nestedContainerEnabled&&!o&&i.parents('[data-type="container-content"]').length>0||function(t,n,e,a){var o=this,i=o.options,s=o.contentAreasWrapper;e.addClass(c.CONTAINER_CONTENT),a&&e.addClass(c.SUB_CONTAINER_CONTENT),e.attr("id",r());var l=$('<div class="'.concat(c.CONTAINER_CONTENT_INNER,'"></div>'));l.html(e.html()),e.html(l);var T=$(S.call(o,a?R.SUB_CONTAINER_CONTENT:R.CONTAINER_CONTENT,i.containerSettingEnabled));T.appendTo(e),T.children(".".concat(c.ADD_CONTENT)).on("click",function(t){t.preventDefault(),M.call(o,l,m.APPEND,!0,!a&&i.nestedContainerEnabled)}),l.sortable({handle:".".concat(c.COMPONENT_MOVE,", .").concat(c.CONTAINER_MOVE),helper:"clone",items:"> section",connectWith:".".concat(c.CONTAINER_CONTENT_INNER),tolerance:"pointer",receive:function(n,e){var a,r=e.helper,T=e.item;r&&r.remove(),(a=T.closest(".".concat(c.CONTAINER))).hasClass(c.STATE_TOOLBAR_SHOWED)||(s.find(".".concat(c.CONTAINER,".").concat(c.STATE_TOOLBAR_SHOWED)).removeClass(c.STATE_TOOLBAR_SHOWED),a.addClass(c.STATE_TOOLBAR_SHOWED)),"function"==typeof i.onContainerChanged&&i.onContainerChanged.call(o,n,a,t),"function"==typeof i.onContentChanged&&i.onContentChanged.call(o,n,t),T.removeClass(c.UI_DRAGGING),B.call(o,l)},start:function(t,n){n.item.addClass(c.UI_DRAGGING),n.item.addClass(c.STATE_TOOLBAR_SHOWED)},stop:function(t,n){n.helper&&n.helper.remove(),n.item.removeClass(c.UI_DRAGGING),B.call(o,l)}}),l.children().each(function(){var e=$(this);e.find('[data-type="container-content"]').length>0?g.call(o,t,e):L.call(o,t,n,e,!0)}),B.call(o,l)}.call(e,t,n,i,o)}),"function"==typeof a.onInitContainer&&a.onInitContainer.call(e,n,t),n.addClass(c.STATE_INITIALIZED),n.removeClass(c.STATE_INITIALIZING))},U=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this,o='<div class="'.concat(c.MODAL_FOOTER,'"></div>'),i=$('\n        <div class="'.concat(c.UI," ").concat(c.MODAL," ").concat(n?c.STATE_HAS_FOOTER:"",'" id="').concat(t,'">\n            <div class="').concat(c.MODAL_HEADER,'">\n                <button type="button" class="').concat(c.MODAL_CLOSE,'">&times;</button>\n                <h4 class="').concat(c.MODAL_TITLE,'"></h4>\n            </div>\n            <div class="').concat(c.MODAL_BODY,'"></div>\n            ').concat(n?o:"","\n        </div>\n    "));return e||i.on("click",".".concat(c.MODAL_CLOSE),function(t){t.preventDefault(),I.call(a,i)}),i.appendTo(document.body)},w=function(){var t=this,n=t.options,e=t.modal=U.call(t,r(),!1,!0);"string"==typeof n.snippetsUrl&&n.snippetsUrl.length>0?(e.find(".".concat(c.MODAL_BODY)).append('\n            <div class="'.concat(c.SNIPPETS_WRAPPER,'">\n                <div class="').concat(c.SNIPPETS,'"></div>\n            </div>\n        ')),$.ajax({type:"get",dataType:"html",url:n.snippetsUrl,success:function(e){"function"==typeof n.onSnippetsLoaded&&(e=n.onSnippetsLoaded.call(t,e)||e),function(t){var n=this,e="",a="";$(t).filter("div").each(function(){var t=$(this),o=t.html().trim(),c=t.attr("data-preview"),i=t.attr("data-type"),r=t.attr("data-meditor-title"),s=t.attr("data-meditor-categories")||"",l=n.getDataAttributes(t,["data-preview","data-type","data-meditor-title","data-meditor-categories"],!0),E=_(T.call(n,i,r,c,s,o,l),2),d=E[0],N=E[1];a+=d,e+=N}),n.categoryContainer=d(n.categoryContainer),n.categoryComponent=d(n.categoryComponent),n.modal.find(".".concat(c.SNIPPETS)).html(a),n.modal.find(".".concat(c.MODAL_BODY)).append(e)}.call(t,e),function(){var t=this,n=t.options,e=h(E.call(t),2),a=e[0],o=e[1];o.html('\n        <span class="'.concat(c.UI," ").concat(c.SNIPPETS_FILTER_LABEL,'">Category:</span>\n        <select class="').concat(c.UI," ").concat(c.SNIPPETS_FILTER,'">\n            ').concat(a,'\n        </select>\n        <input type="text" class="').concat(c.UI," ").concat(c.SNIPPETS_SEARCH,'" value="" placeholder="Type to search..." />\n    '));var i,r=o.find(".".concat(c.SNIPPETS_SEARCH)),s=o.find(".".concat(c.SNIPPETS_FILTER)),l=function(){var e=(s.val()||"").toLowerCase(),a=(r.val()||"").toLowerCase(),o=t.modal.find(".".concat(c.SNIPPET));o.filter(".".concat(c.STATE_SELECTED)).removeClass(c.STATE_SELECTED),e||a?o.each(function(){var t=$(this),o=t.attr("data-meditor-categories").toLowerCase(),i=o.split(n.snippetsCategoriesSeparator),r=0;e&&-1===$.inArray(e,i)&&r++,a&&-1===t.attr("data-meditor-title").toLowerCase().indexOf(a)&&-1===o.indexOf(a)&&r++,t[0===r?"removeClass":"addClass"](c.STATE_NOT_MATCHED)}):o.removeClass(c.STATE_NOT_MATCHED)};s.on("change",function(){l()}),r.on("keydown",function(){clearTimeout(i),i=setTimeout(l,200)})}.call(t)},error:function(e){"function"==typeof n.onSnippetsError&&n.onSnippetsError.call(t,e)}}),function(){var t=this.modal;t.on({click:function(n){n.preventDefault();var e=$(this);e.hasClass(c.STATE_SELECTED)?e.removeClass(c.STATE_SELECTED):(t.find(".".concat(c.STATE_SELECTED)).removeClass(c.STATE_SELECTED),e.addClass(c.STATE_SELECTED))},mouseover:function(){$(this).addClass(c.STATE_SELECTED)},mouseout:function(){$(this).removeClass(c.STATE_SELECTED)}},".".concat(c.SNIPPET))}.call(t),e.find(".".concat(c.MODAL_CLOSE)).on("click",function(n){n.preventDefault(),v.call(t)}),e.on("click",".".concat(c.SNIPPET_ADD),function(n){n.preventDefault();var e=$(this).closest(".".concat(c.SNIPPET));(function(t,n,e,a){var o,i,r=this.modal,s=this.options,l=e.closest(".".concat(c.CONTENT_AREA)),T=n.attr("data-type"),E=r.find(n.attr("data-snippet")),d=E.html(),N=r.hasClass(c.MODAL_COMPONENT),O=r.hasClass(c.MODAL_CONTAINER),f=!1,p=!1,C=!1;if("container"===T?f=!0:(N&&!O&&(p=!0),N&&O&&(e.is(".".concat(c.CONTAINER_CONTENT_INNER))?p=!0:a===m.APPEND?C=!0:p=!0)),this.contentAreasWrapper.find(".".concat(c.STATE_TOOLBAR_SHOWED)).removeClass(c.STATE_TOOLBAR_SHOWED),f&&(o=$('\n            <section class="'.concat(c.UI," ").concat(c.CONTAINER," ").concat(c.STATE_TOOLBAR_SHOWED,'">\n                <section class="').concat(c.UI," ").concat(c.CONTAINER_INNER,'">').concat(d,"</section>\n            </section>\n        ")),e[a](o),"function"==typeof s.onContainerSnippetAdded&&s.onContainerSnippetAdded.call(this,t,o,n,l),"function"==typeof s.onContentChanged&&s.onContentChanged.call(this,t,l),b.call(this,l,o),o.trigger("click")),p){var A=this.getDataAttributes(E,null,!0);i=$('\n            <section class="'.concat(c.UI," ").concat(c.COMPONENT," ").concat(c.STATE_TOOLBAR_SHOWED,'" data-type="').concat(T,'" ').concat(A.join(" "),'>\n                <section class="').concat(c.UI," ").concat(c.COMPONENT_CONTENT,'">').concat(d,"</section>\n            </section>\n        ")),e[a](i);var u=e.closest(".".concat(c.CONTAINER));u.addClass(c.STATE_TOOLBAR_SHOWED),"function"==typeof s.onComponentSnippetAdded&&s.onComponentSnippetAdded.call(this,t,i,n,l),"function"==typeof s.onContentChanged&&s.onContentChanged.call(this,t,l),D.call(this,l,u,i),i.trigger("click")}if(C){var _=this.getDataAttributes(E,null,!0);o=$('\n            <section class="'.concat(c.UI," ").concat(c.CONTAINER," ").concat(c.STATE_TOOLBAR_SHOWED,'">\n                <section class="').concat(c.UI," ").concat(c.CONTAINER_INNER,'">').concat(s.containerForQuickAddComponent,"</section>\n            </section>\n        ")),i=$('\n            <section class="'.concat(c.UI," ").concat(c.COMPONENT," ").concat(c.STATE_TOOLBAR_SHOWED,'" data-type="').concat(T,'" ').concat(_.join(" "),'>\n                <section class="').concat(c.UI," ").concat(c.COMPONENT_CONTENT,'">').concat(d,"</section>\n            </section>\n        ")),o.find('[data-type="container-content"]').eq(0).html(i),e[a](o),"function"==typeof s.onComponentSnippetAdded&&s.onComponentSnippetAdded.call(this,t,i,n,l),"function"==typeof s.onContentChanged&&s.onContentChanged.call(this,t,l),b.call(this,l,o),i.trigger("click")}e.is(".".concat(c.CONTENT_AREA_INNER))||B(e)}).call(t,n,e,t.modalTarget,t.modalTargetAction),v.call(t)})):t.error('"snippetsUrl" must be not null!')},W=function(t){var n,e=t.clone(),a=f.call(this,e),o=MEditor.components[a],i=s(e,null,!0),r=e.find(".".concat(c.IFRAME_COVER_WRAPPER));if(r.length>0){r.find(".".concat(c.IFRAME_COVER)).remove();var l=r.children("iframe");r.hasClass(c.IFRAME_COVER_WRAPPER_FAKE)?l.unwrap():r.removeClass(c.IFRAME_COVER_WRAPPER)}"function"==typeof o.getContent?n=o.getContent.call(o,e,this):n=e.children(".".concat(c.COMPONENT_CONTENT)).html();return e.html(n).find("[data-dynamic-href]").each(function(){$(this).html("")}),"<section ".concat(i.join(" "),">").concat(e.html(),"</section>")};function V(t,n){var e=this,a=t.children(".".concat(c.CONTAINER_INNER)).clone();return a.find("[data-type=container-content]").not(n?"":".".concat(c.SUB_CONTAINER_CONTENT)).each(function(){var t=$(this);t.removeClass("".concat(c.CONTAINER_CONTENT," ").concat(c.SUB_CONTAINER_CONTENT," ").concat(c.SORTABLE)).removeAttr("id");var n=t.children(),a="";n.children().each(function(){var t=$(this);t.is(".".concat(c.COMPONENT))?a+=W.call(e,t):t.is(".".concat(c.SUB_CONTAINER))&&(a+=V.call(e,t,!0))}),t.html(a)}),"<section>".concat(a.html(),"</section>")}var F=function(t){var n=this,e=[];return n.contentAreasWrapper.find(".".concat(c.CONTENT_AREA_INNER)).each(function(){var t="";$(this).children(".".concat(c.CONTAINER)).each(function(){var e=$(this);t+=V.call(n,e)}),e.push(t)}),t?e:e.join("\n")},k=function(){(function(){var t=this,n=t.options,e=$('<a href="javascript:void(0);" title="'.concat(n.locale.previewOff,'" class="').concat(c.UI," ").concat(c.TOPBAR_BUTTON,'">').concat(l.PREVIEW_OFF,"</a>"));t.previewArea=$('<div class="'.concat(c.PREVIEW_AREA,'"></div>')),t.contentAreasWrapper.after(t.previewArea),e.on("click",function(a){a.preventDefault();var o=!e.hasClass(c.STATE_ACTIVE);if(e.html(o?l.PREVIEW_ON:l.PREVIEW_OFF),e[o?"addClass":"removeClass"](c.STATE_ACTIVE),e.attr("title",o?n.locale.previewOn:n.locale.previewOff),t.iframeBody[o?"addClass":"removeClass"](c.STATE_PREVIEWING),t.previewArea.html(""),C.call(t),o){var i=t.iframe,r=i[0].contentWindow.document.querySelector("meta[name=viewport]");if(null===r){var s=i[0].contentWindow.document.getElementsByTagName("head")[0];(r=i[0].contentWindow.document.createElement("meta")).setAttribute("name","viewport"),s.appendChild(r)}r.setAttribute("content","width=device-width, initial-scale=1.0");var T=i[0].contentWindow.document.createElement("link");T.setAttribute("rel","stylesheet"),T.setAttribute("type","text/css"),T.setAttribute("href",encodeURIComponent("css/email.css")),i[0].contentWindow.document.getElementsByTagName("head")[0].appendChild(T)}o&&t.previewArea.html(F.call(t)).find("[data-dynamic-href]").each(function(){var n=$(this);n.html("Loading..."),P.call(t,n)})}),t.topbarRight.append(e)}).apply(this),function(){var t=this,n=t.options,e=$('<a href="javascript:void(0);" title="'.concat(n.locale.save,'" class="').concat(c.UI," ").concat(c.TOPBAR_BUTTON,'">').concat(l.SAVE,"</a>"));e.on("click",function(e){e.preventDefault();var a=F.call(t);"function"==typeof n.onSave&&n.onSave.call(t,a)}),t.topbarRight.append(e)}.apply(this)},H=function(){var t=r(),n=this.options;this.topbar=$('\n        <div class="'.concat(c.UI," ").concat(c.TOPBAR,'" id="').concat(t,'">\n            <div class="').concat(c.UI," ").concat(c.TOPBAR_LEFT,'">\n                <div class="').concat(c.UI," ").concat(c.TOPBAR_TITLE,'" title="').concat(n.title,'">').concat(n.title,'</div>\n            </div>\n            <div class="').concat(c.UI," ").concat(c.TOPBAR_CENTER,'">\n            </div>\n            <div class="').concat(c.UI," ").concat(c.TOPBAR_RIGHT,'">\n            </div>\n        </div>\n    ')),this.topbarLeft=this.topbar.find(".".concat(c.TOPBAR_LEFT)),this.topbarCenter=this.topbar.find(".".concat(c.TOPBAR_CENTER)),this.topbarRight=this.topbar.find(".".concat(c.TOPBAR_RIGHT)),this.topbar.appendTo(this.wrapper),function(){var t=this.options,n=this.topbarCenter,e=this.iframe.parent(),a=$('\n        <a href="javascript:void(0);" title="'.concat(t.locale.viewOnMobile,'" class="').concat(c.UI," ").concat(c.TOPBAR_BUTTON,'">').concat(l.DEVICE_MOBILE,"</a>\n    "));a.on("click",function(o){o.preventDefault(),n.find(".".concat(c.STATE_ACTIVE)).removeClass(c.STATE_ACTIVE),e.css("width",t.widthMobile),e.css("min-width",""),a.addClass(c.STATE_ACTIVE)});var o=$('\n        <a href="javascript:void(0);" title="'.concat(t.locale.viewOnTablet,'" class="').concat(c.UI," ").concat(c.TOPBAR_BUTTON,'">').concat(l.DEVICE_TABLET,"</a>\n    "));o.on("click",function(a){a.preventDefault(),n.find(".".concat(c.STATE_ACTIVE)).removeClass(c.STATE_ACTIVE),e.css("width",t.widthTablet),e.css("min-width",""),o.addClass(c.STATE_ACTIVE)});var i=$('\n        <a href="javascript:void(0);" title="'.concat(t.locale.viewOnLaptop,'" class="').concat(c.UI," ").concat(c.TOPBAR_BUTTON,'">').concat(l.DEVICE_LAPTOP,"</a>\n    "));i.on("click",function(a){a.preventDefault(),n.find(".".concat(c.STATE_ACTIVE)).removeClass(c.STATE_ACTIVE),e.css("width",t.widthLaptop),e.css("min-width",""),i.addClass(c.STATE_ACTIVE)});var r=$('\n        <a href="javascript:void(0);" title="'.concat(t.locale.viewOnDesktop,'" class="').concat(c.UI," ").concat(c.TOPBAR_BUTTON,'">').concat(l.DEVICE_DESKTOP,"</a>\n    "));r.on("click",function(a){a.preventDefault(),n.find(".".concat(c.STATE_ACTIVE)).removeClass(c.STATE_ACTIVE),e.css("width",""),e.css("min-width",t.minWidthDesktop),r.addClass(c.STATE_ACTIVE)}).trigger("click"),n.append(a),n.append(o),n.append(i),n.append(r)}.call(this),k.call(this)},G=function(t,n){var e=$(t.target),a=e.closest(n);return e.is(n)?e:a.length>0?a:null},x=function(t){var n=f.call(this,t),e=MEditor.components[n];"function"==typeof e.destroy&&e.destroy.call(e,t,this),t.remove()},j=function(){(function(){var t=this,n=t.options,e=t.contentAreasWrapper;t.iframeBody.on("click",function(a){G(a,".".concat(c.SIDEBAR)),G(a,".".concat(c.MODAL));var o=G(a,".".concat(c.CONTAINER));if(o&&!o.hasClass(c.STATE_TOOLBAR_SHOWED)){e.find(".".concat(c.STATE_TOOLBAR_SHOWED)).removeClass(c.STATE_TOOLBAR_SHOWED),o.addClass(c.STATE_TOOLBAR_SHOWED);var i=o.parent();"function"==typeof n.onContainerSelected&&n.onContainerSelected.call(t,a,o,i)}var r=G(a,".".concat(c.COMPONENT));if(r){if(!r.hasClass(c.STATE_TOOLBAR_SHOWED)){e.find(".".concat(c.COMPONENT,".").concat(c.STATE_TOOLBAR_SHOWED)).removeClass(c.STATE_TOOLBAR_SHOWED),r.addClass(c.STATE_TOOLBAR_SHOWED);var s=r.parent();"function"==typeof n.onComponentSelected&&n.onComponentSelected.call(t,a,r,s)}if(G(a,".".concat(c.TOOLBAR_COMPONENT)))return;r.find(".".concat(c.COMPONENT_SETTING)).length>0?(t.settingComponent=null,u.call(t,r)):C.call(t)}})}).call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.TOOLBAR_COMPONENT_BOTTOM," .").concat(c.ADD_CONTENT),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.COMPONENT));M.call(t,a,m.AFTER,!0,n.nestedContainerEnabled)})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.TOOLBAR_SUB_CONTAINER_BOTTOM," .").concat(c.ADD_CONTENT),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.SUB_CONTAINER));M.call(t,a,m.AFTER,!0,n.nestedContainerEnabled)})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.COMPONENT_DELETE),function(e){e.preventDefault();var a=$(this);if(confirm(n.locale.confirmDeleteComponentText)){var o=a.closest(".".concat(c.COMPONENT)),i=o.closest(".".concat(c.CONTAINER)),r=o.closest(".".concat(c.CONTAINER_CONTENT_INNER)),s=o.closest(".".concat(c.CONTENT_AREA));"function"==typeof n.onBeforeComponentDeleted&&n.onBeforeComponentDeleted.call(t,e,o,s),o.is(t.settingComponent)&&C.call(t),x.call(t,o),"function"==typeof n.onComponentDeleted&&n.onComponentDeleted.call(t,e,o,s),"function"==typeof n.onContainerChanged&&n.onContainerChanged.call(t,e,i,s),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,s),B(r)}})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.COMPONENT_DUPLICATE),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.COMPONENT)),o=a.closest(".".concat(c.CONTAINER)),i=o.parent(),r=$(W.call(t,a));a.after(r),L.call(t,i,o,r),"function"==typeof n.onComponentDuplicated&&n.onComponentDuplicated.call(t,a,r,i),"function"==typeof n.onContainerChanged&&n.onContainerChanged.call(t,e,o,i),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,i)})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.COMPONENT_MOVE_DOWN),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.COMPONENT)),o=a.next(".".concat(c.COMPONENT));if(o.length>0){var i=a.closest(".".concat(c.CONTAINER)),r=a.closest(".".concat(c.CONTENT_AREA));o.after(a),"function"==typeof n.onContainerChanged&&n.onContainerChanged.call(t,e,i,r),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,r)}})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.COMPONENT_MOVE_UP),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.COMPONENT)),o=a.prev(".".concat(c.COMPONENT));if(o.length>0){var i=a.closest(".".concat(c.CONTAINER)),r=a.closest(".".concat(c.CONTENT_AREA));o.before(a),"function"==typeof n.onContainerChanged&&n.onContainerChanged.call(t,e,i,r),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,r)}})}.call(this),function(){var t=this;t.contentAreasWrapper.on("click",".".concat(c.COMPONENT_SETTING),function(n){n.preventDefault();var e=$(this).closest(".".concat(c.COMPONENT));u.call(t,e)})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.CONTAINER_DELETE),function(e){e.preventDefault();var a=$(this);if(confirm(n.locale.confirmDeleteContainerText)){var o=a.closest(".".concat(c.CONTAINER)),i=o.closest(".".concat(c.CONTAINER_CONTENT_INNER)),r=o.find(".".concat(c.COMPONENT)),s=o.parent();"function"==typeof n.onBeforeContainerDeleted&&n.onBeforeContainerDeleted.call(t,e,o,s);var l=t.settingComponent;l?l.closest(".".concat(c.CONTAINER)).is(o)&&C.call(t):o.is(t.settingContainer)&&C.call(t),r.length>0&&r.each(function(){x.call(t,$(this))}),o.remove(),"function"==typeof n.onContainerDeleted&&n.onContainerDeleted.call(t,e,o,s),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,s),B(i)}})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.CONTAINER_DUPLICATE),function(e){e.preventDefault();var a=$(this),o=a.closest(".".concat(c.CONTAINER)),i=o.parent(),r=$(V.call(t,o,a.parent().hasClass(c.TOOLBAR_SUB_CONTAINER)));o.after(r),g.call(t,i,r),"function"==typeof n.onContainerDuplicated&&n.onContainerDuplicated.call(t,o,r,i),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,i)})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.CONTAINER_MOVE_DOWN),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.CONTAINER)),o=a.next(".".concat(c.CONTAINER));if(o.length>0){var i=a.parent();o.after(a),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,i)}})}.call(this),function(){var t=this,n=t.options;t.contentAreasWrapper.on("click",".".concat(c.CONTAINER_MOVE_UP),function(e){e.preventDefault();var a=$(this).closest(".".concat(c.CONTAINER)),o=a.prev(".".concat(c.CONTAINER));if(o.length>0){var i=a.parent();o.before(a),"function"==typeof n.onContentChanged&&n.onContentChanged.call(t,e,i)}})}.call(this),function(){var t=this;t.contentAreasWrapper.on("click",".".concat(c.CONTAINER_SETTING),function(n){n.preventDefault();var e=$(this).closest(".".concat(c.CONTAINER));u.call(t,e)})}.call(this)},Y=function(t,n){var e=this,a=e.options;t.addClass(c.CONTENT_AREA);var o=t.html(),i=$('<div class="'.concat(c.CONTENT_AREA_INNER,'"></div>')).html(o);if(t.html(i),"function"==typeof a.onBeforeInitContentArea&&a.onBeforeInitContentArea.call(e,t),!n){var r=$(S.call(e,R.CONTENT_AREA));t.append(r),r.children(".".concat(c.ADD_CONTENT)).on("click",function(t){t.preventDefault(),M.call(e,i,m.APPEND,!0,!0)})}if(i.sortable({handle:".".concat(c.TOOLBAR_CONTAINER,":not(.").concat(c.TOOLBAR_SUB_CONTAINER,") .").concat(c.CONTAINER_MOVE),items:"> section",helper:"clone",connectWith:".".concat(c.CONTENT_AREA),axis:"y",tolerance:"pointer",receive:function(n,o){var i=o.helper,r=o.item;i&&i.remove(),C.call(e),"function"==typeof a.onContentChanged&&a.onContentChanged.call(e,n,t),r.addClass(c.UI_DRAGGING)},start:function(t,n){n.item.addClass(c.UI_DRAGGING),n.item.addClass(c.STATE_TOOLBAR_SHOWED)},stop:function(t,n){n.helper&&n.helper.remove(),n.item.removeClass(c.UI_DRAGGING)}}),i.children("section").each(function(){g.call(e,t,$(this))}),"function"==typeof a.onInitContentArea){var s=a.onInitContentArea.call(e,t);s&&s.length>0&&$.each(s,function(){g.call(e,t,$(this))})}},Z=function(){var t=this.element,n=this.options,e=this.generateId(),a=this.wrapper=$('\n        <div id="'.concat(e,'" class="').concat(c.UI," ").concat(c.WRAPPER,'">\n            <div class="').concat(c.UI," ").concat(c.IFRAME_WRAPPER,'">\n                <div class="').concat(c.UI," ").concat(c.IFRAME_WIDTH_SWITCHER,'">\n                    <iframe class="').concat(c.UI," ").concat(c.IFRAME,'"></iframe>\n                </div>\n            </div>\n        </div>\n    '));t.addClass(c.UI_HIDDEN),t.after(a);var o=this.iframe=a.find(".".concat(c.IFRAME));this.iframeDoc=o.contents(),this.iframeDoc.get(0).open(),this.iframeDoc.get(0).close(),this.iframeWindow=o[0].contentWindow?o[0].contentWindow:o[0].contentDocument.defaultView,this.iframeHead=this.iframeDoc.find("head"),this.iframeBody=this.iframeDoc.find("body");var i="";$('[data-type="meditor-style"]').each(function(){var t=$(this),n=t.attr("id")||"",e=t.attr("href")||t.attr("data-href")||"";i+='<meta name="viewport" content="width=device-width, initial-scale=1" /> \n',i+='<link rel="stylesheet" type="text/css" href="css%2Femail.css"> \n',i+=e?'<link rel="stylesheet" type="text/css" href="'.concat(e,'" ').concat(n," />\n"):'<style type="text/css" '.concat(n,">").concat(t.html(),"</style>\n")}),$.isArray(n.contentStyles)&&$.each(n.contentStyles,function(t,n){var e=n.id||"";n.href?i+='<link rel="stylesheet" type="text/css" href="'.concat(n.href,'" ').concat(e," />\n"):i+='<style type="text/css" '.concat(e,">").concat(n.content,"</style>\n")}),this.iframeHead.append(i),this.contentAreasWrapper=$(n.contentAreasWrapper||"<div />"),this.contentAreasWrapper.attr("class","".concat(c.UI," ").concat(c.CONTENT_AREAS_WRAPPER)),this.contentAreasWrapper.html(t.val()||t.html()||""),this.contentAreasWrapper.attr("id")||this.contentAreasWrapper.attr("id",this.generateId()),this.iframeBody.append(this.contentAreasWrapper).addClass(c.IFRAME_BODY),"function"==typeof n.onInitIframe&&n.onInitIframe.call(this,this.iframe,this.iframeHead,this.iframeBody),function(){var t,n=this,e=n.options,a=n.contentAreasWrapper;if(e.contentAreasSelector&&(t=a.find(e.contentAreasSelector)),!t||0===t.length){var o=a.html();t=$("<div />").html(o),a.empty().append(t)}t.each(function(){var t=$(this);t.attr("id")||t.attr("id",r()),Y.call(n,t)})}.call(this),j.call(this)},K=function(t,n){this.element=t,this.options=$.extend({},i,n),Z.call(this),H.call(this),function(){var t=this,n=r(),e=t.sidebar=$('\n        <div class="'.concat(c.UI," ").concat(c.SIDEBAR,'" id="').concat(n,'">\n            <div class="').concat(c.UI," ").concat(c.SIDEBAR_HEADER,'">\n                <span class="').concat(c.UI," ").concat(c.SIDEBAR_TITLE,'"></span>\n                <a href="javascript:void(0);" class="').concat(c.UI," ").concat(c.SIDEBAR_CLOSER,'">&times;</a>\n            </div>\n            <div class="').concat(c.UI," ").concat(c.SIDEBAR_BODY,'"></div>\n        </div>\n    '));e.find(".".concat(c.SIDEBAR_CLOSER)).on("click",function(n){n.preventDefault(),C.call(t)}),t.sidebarTitle=e.find(".".concat(c.SIDEBAR_TITLE)),(t.sidebarBody=e.find(".".concat(c.SIDEBAR_BODY))).on("submit","form",function(t){return t.preventDefault(),!1}),e.appendTo(t.wrapper)}.call(this),w.call(this),function(){var t=this,n=t.options;if($.isPlainObject(n.extraSettings)){var e=function(e){var a=n.extraSettings[e],o="function"==typeof a.trigger?a.trigger.call(t,a):a.trigger;o.attr("data-extra-setting",e),o.on("click",function(n){n.preventDefault(),u.call(t,o)})};for(var a in n.extraSettings)e(a)}}.call(this),this.id=r(),MEditor.instances[this.id]=this,"function"==typeof this.options.onReady&&this.options.onReady.call(this)},Q=function(){var t=this.element,n=this.id,e=F.call(this,!1);this.wrapper.remove(),t.is("textarea")?t.val(e):t.html(e),t.removeClass(c.UI_HIDDEN),t.data("meditor",null),delete MEditor.instances[n]};function q(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function X(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}if(!o.a.fn.sortable)throw new Error("[ MEditor ] $.fn.sortable does not exist. Please import $.fn.sortable into your document.");window.MEDITOR_DEBUG=!0;var z=function(){function t(n,e){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,"settingComponent",null),X(this,"settingContainer",null),X(this,"copyContent",null),X(this,"cutContent",null),X(this,"categoryComponent",[]),X(this,"categoryContainer",[]),K.apply(this,[n,e])}var n,e,a;return n=t,a=[{key:"log",value:function(){if(console&&"function"==typeof console.log&&window.KEDITOR_DEBUG){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];console.log.apply(console,["[ MEditor ] "].concat(n))}}},{key:"error",value:function(t){throw new Error("[ MEditor ] ".concat(t))}},{key:"init",value:function(n,e){return new t(n,e)}}],(e=[{key:"getSettingContainer",value:function(){return this.settingContainer}},{key:"getSettingComponent",value:function(){return this.settingComponent}},{key:"generateId",value:function(){return r()}},{key:"getDataAttributes",value:function(t,n,e){return s.apply(this,[t,n,e])}},{key:"initIframeCover",value:function(t,n){return function(t,n){n||(t.wrap('<div class="'.concat(c.IFRAME_COVER_WRAPPER_FAKE,'"></div>')),n=t.parent()),n.addClass("".concat(c.IFRAME_COVER_WRAPPER));var e=$('<div class="'.concat(c.IFRAME_COVER,'"></div>'));n.prepend(e),n.on("mouseleave",function(){n.removeClass("".concat(c.IFRAME_COVER_HIDDEN))}),e.on("dblclick",function(t){t.preventDefault(),n.addClass("".concat(c.IFRAME_COVER_HIDDEN))})}.apply(this,[t,n])}},{key:"initModal",value:function(t,n,e){return U.call(this,t,n,e)}},{key:"openModal",value:function(t){return y.call(this,t)}},{key:"closeModal",value:function(t){return I.call(this,t)}},{key:"showSettingPanel",value:function(t){u.call(this,t)}},{key:"hideSettingPanel",value:function(){C.call(this)}},{key:"getContent",value:function(t){return F.apply(this,[t])}},{key:"setContent",value:function(t,n){return function(t,n){var e=this.wrapper;n?n.jquery||(n=e.find(n)):n=e.children(".".concat(c.CONTENT_AREA)),0===n.length&&this.error("Content area does not exist!"),n.html(t),Y.call(n,!0)}.apply(this,[t,n])}},{key:"destroy",value:function(){return Q.apply(this)}},{key:"addSnippet",value:function(t,n,e,a,o,i){return function(t,n,e,a,o,i){var r=N(T.call(this,t,n,e,a,o,i),2),s=r[0],l=r[1];this.categoryContainer=d(this.categoryContainer),this.categoryComponent=d(this.categoryComponent),this.modal.find(".".concat(c.SNIPPETS)).append(s),this.modal.find(".".concat(c.MODAL_BODY)).append(l);var O=N(E.call(this),2),f=O[0];O[1].find(".".concat(c.SNIPPETS_FILTER)).html(f).trigger("change")}.apply(this,[t,n,e,a,o,i])}}])&&q(n.prototype,e),a&&q(n,a),t}();X(z,"DEFAULTS",i),X(z,"debug",!1),X(z,"version","2.0.0"),X(z,"instances",{}),X(z,"components",{blank:{settingEnabled:!1}}),o.a.fn.meditor=function(t){var n=o()(this),e=n.data("meditor");return"string"!=typeof t?(e||(e=z.init(n,t),n.data("meditor",e)),e):e&&e[t]&&"function"==typeof e[t]?e[t].apply(e,Array.prototype.slice.call(arguments,1)):void 0},window.MEditor=o.a.meditor=o.a.fn.meditor.constructor=z}])});
//# sourceMappingURL=meditor.js.map